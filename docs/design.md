## 在线打点

### 1 功能描述
#### 1.1 在线打点工具需具备以下特点
- 轻量化：支持可视化场景的展示，在场景中进行打点，点位绑定业务数据主键；不进行模型管理。尽量少依赖数据库和中间件，仅启动前后端服务实现打点功能。
- 独立部署：不需要侵入业务系统，可以作为一个独立应用进行部署；对于某些简单的可视化项目，仅部署一套在线打点工具就可以上线使用。
- 多引擎支持：支持对图扑引擎和UE5引擎的打点、设备绑定、读取点位等功能。
- 设备信息来源可配置：支持两种设备信息绑定方式：
```shell
1. 从业务系统读取设备信息：打点时，点位绑定业务系统的设备唯一id，配置业务系统查询接口来调用接口获取设备信息。
2. 自定义设备信息：通过定义设备元数据，在打点时直接填写设备信息。
```
- 可对外提供第三方接口(对于自定义设备信息的场景，需要查询点位信息)
- 可考虑支持某些通用业务，如设备联动绑定等
### 2 功能列表
#### 2.1 模型加载功能
- 图扑引擎：
```shell
1. 需要将场景文件导入打点工具的前端工程中（与现场图扑可视化环境的场景文件资源一致）
2. 打点工具加载场景，同时加载需要展示的点位数据（根据场景动态加载可见的点位）
3. 支持场景的切换（如室外场景、楼栋场景、楼层场景等）
4. 支持楼层区域的展示隐藏等
```
- UE引擎：
```shell
1. 连接UE的像素流
2. 打点工具加载场景，同时加载需要展示的点位数据（根据场景动态加载可见的点位）
3. 支持一般操作，包含视角、区域转换、切楼、区域展示隐藏等
```
#### 2.2 在线设置点位功能
- 图扑引擎：
```shell
1. 俯视模式
2. 点位默认高度设置
3. 打点，记录点位坐标
4. 绑定点位信息到业务数据（有设备管理业务系统的场景）
5. 填写点位信息（无设备管理业务系统的场景）
6. 保存点位数据
```
- UE引擎：
```shell
1. 俯视或正交视角
2. 点位默认高度设置
3. 打点，记录点位坐标
4. 绑定点位信息到业务数据（有设备管理业务系统的场景）
5. 填写点位信息（无设备管理业务系统的场景）
6. 保存点位数据
```
#### 2.3 设备类型管理（仅用于没有设备管理业务系统的场景）
- 设备类型的维护（增删改查）
- 设备类型名称不可重复
#### 2.4 设备元数据管理（仅用于没有设备管理业务系统的场景）
- 设备元数据的维护（增删改查）
- 设备元数据版本管理（兼容新的设备属性）
#### 2.5 设备管理（仅用于没有设备管理业务系统的场景）
- 设备数据的维护（增删改查）
#### 2.6 场景管理（如图扑的不同楼栋场景名称与其编号的管理，UE目前是单场景，可以不配置）
- 场景名称和编号管理
- 楼层名称和编号管理
- 通过场景编号、楼层编号、专题编号查询可展示的点位列表
#### 2.7 点位管理
- 点位类型管理（空间点位、设备点位，设备点位可能会分为监控点位、门禁点位等类型）
- 点位数据的维护（增删改查）
- 点位数据的版本管理（设备更换）
#### 2.8 点位联动管理
- 联动类型管理
- 点位联动关系配置，也就是通过一个点位绑定多个关联点位（可以是空间点位联动设备点位，也可以是设备点位联动空间点位等）
#### 2.9 专题管理
- 智能化专题基础信息管理
- 专题中可展示点位类型管理
#### 2.10 外部接口管理
- 接口类型管理（可使用设备类型管理）
- 设备列表查询接口、设备详情查询接口管理（包括主键ID的key管理等）
- 外部系统登录接口管理（登录后才能请求接口）
